<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FaithConnect - Calendar</title>

  <!-- favicon -->
  <link rel="icon" href="/favicon.svg">

  <!-- custom css link -->
  <link rel="stylesheet" href="./assets/css/style.css">

  <!-- google font link -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Authentication Check - Runs Immediately -->
  <script>
    console.log('Checking login status:', localStorage.getItem('isLoggedIn')); // Debug log
    if (!localStorage.getItem('isLoggedIn')) {
      window.location.href = 'assets/login-signup.html';
    }
  </script>
</head>

<body>
  <div id="header-placeholder"></div>

  <script>
    fetch("header.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("header-placeholder").innerHTML = data;

        // Reattach event listeners after loading header dynamically
        let menuButton = document.querySelector("[data-nav-open-btn]");
        let navbar = document.querySelector("[data-navbar]");
        let closeButton = document.querySelector("[data-nav-close-btn]");
        if (menuButton && navbar && closeButton) {
          menuButton.addEventListener("click", () => navbar.classList.add("active"));
          closeButton.addEventListener("click", () => navbar.classList.remove("active"));
        }

        // Highlight the current page link
        const currentPage = window.location.pathname.split('/').pop() || 'index.html';
        const navLinks = document.querySelectorAll('.navbar-link');
        navLinks.forEach(link => {
          const linkPage = link.getAttribute('href');
          if (linkPage === currentPage && linkPage === 'calendar.html') {
            link.style.textDecoration = 'underline';
            link.style.color = '#6b48ff'; // Matching the purple theme
          } else {
            link.style.textDecoration = 'none';
            link.style.color = ''; // Reset to default
          }
        });

        // Attach logout functionality
        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
          logoutBtn.addEventListener('click', function() {
            if (confirm('Do you want to log out?')) {
              localStorage.removeItem('isLoggedIn');
              window.location.href = 'assets/login-signup.html';
            }
          });
        }
      });
  </script>

  <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>

  <main>
    <article>
      <section class="hero" id="calendar">
        <div class="container">
          <div class="hero-content">
            <p class="hero-subtitle">
              <ion-icon name="calendar-outline"></ion-icon>
              <span>Calendar</span>
            </p>
            <div class="stats-container">
              <div class="stat-card">
                <ion-icon name="calendar-outline"></ion-icon>
                <div>
                  <p>Total Events</p>
                  <h2>24</h2>
                </div>
              </div>
              <div class="stat-card">
                <ion-icon name="people-outline"></ion-icon>
                <div>
                  <p>Expected Attendees</p>
                  <h2>450</h2>
                </div>
              </div>
              <div class="stat-card">
                <ion-icon name="time-outline"></ion-icon>
                <div>
                  <p>Upcoming Events</p>
                  <h2>8</h2>
                </div>
              </div>
              <div class="stat-card">
                <ion-icon name="checkmark-circle-outline"></ion-icon>
                <div>
                  <p>Confirmed RSVPs</p>
                  <h2>312</h2>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="calendar-section">
        <div class="calendar-header">
          <h2>Church Calendar</h2>
          <button class="add-event-btn">
            <ion-icon name="add-outline"></ion-icon> Add Event
          </button>
        </div>
        <div class="calendar-grid">
          <!-- Days of the week -->
          <div class="day-name">Sun</div>
          <div class="day-name">Mon</div>
          <div class="day-name">Tue</div>
          <div class="day-name">Wed</div>
          <div class="day-name">Thu</div>
          <div class="day-name">Fri</div>
          <div class="day-name">Sat</div>
          <!-- Calendar days (dummy example) -->
          <div class="day"><span>30</span></div>
          <div class="day"><span>1</span></div>
          <div class="day"><span>2</span> <div class="event black">Prayer Meeting</div></div>
          <div class="day"><span>3</span></div>
          <div class="day"><span>4</span></div>
          <div class="day"><span>5</span> <div class="event purple">Youth Event</div></div>
          <div class="day"><span>6</span></div>
          <div class="day"><span>7</span> <div class="event black">Sunday Service</div></div>
          <div class="day"><span>8</span></div>
          <div class="day"><span>9</span></div>
          <div class="day"><span>10</span> <div class="event green">Bible Study</div></div>
          <div class="day"><span>11</span></div>
          <div class="day"><span>12</span></div>
          <div class="day"><span>13</span></div>
          <div class="day"><span>14</span> <div class="event black">Sunday Service</div></div>
          <div class="day"><span>15</span></div>
          <div class="day"><span>16</span> <div class="event blue">Leadership</div></div>
          <div class="day"><span>17</span></div>
          <div class="day"><span>18</span></div>
          <div class="day"><span>19</span></div>
          <div class="day"><span>20</span></div>
          <div class="day"><span>21</span></div>
          <div class="day"><span>22</span></div>
          <div class="day"><span>23</span></div>
          <div class="day"><span>24</span></div>
          <div class="day"><span>25</span></div>
          <div class="day"><span>26</span></div>
          <div class="day"><span>27</span></div>
          <div class="day"><span>28</span></div>
          <div class="day"><span>29</span></div>
          <div class="day"><span>30</span></div>
          <div class="day"><span>31</span></div>
        </div>
      </section>
    </article>
  </main>
</body>
</html>